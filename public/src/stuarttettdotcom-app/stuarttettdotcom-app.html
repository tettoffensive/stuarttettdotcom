<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="skew-header.html">
<link rel="import" href="skew-card.html">
<link rel="import" href="skew-info-card.html">
<link rel="import" href="scatter-shapes.html">

<dom-module id="stuarttettdotcom-app">
  <template>
    <style>
    :host {
      display: block;
    }
    .wrapper {
      margin: auto;
      margin-top: 100px;
      /* width: 800px; */
      width: calc(100% - 16px);
      max-width: 1024px;
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
    }

    .wrapper > * {
      margin: 0px;
      margin-bottom: 16px;
    }

    .shapes {
      position: fixed;
      width: 100%;
      height: 120%;
      left: 0;
    }

    .one {
      top: 0;
    }
  }
  </style>
  <scatter-shapes class="shapes one"></scatter-shapes>
  <div class="page">
    <div class="wrapper">
      <skew-header></skew-header>
      <skew-info-card description="Stuart has a unique background with a double major in Art &amp; Design and Computer Science, which give way to a rare skill-set of strong visual and analytical problem-solving skills."></skew-info-card>
      <template is="dom-repeat" items="{{cards}}">
        <skew-card title=[[item.title]] description=[[item.description]] img=[[item.image]]></skew-card>
      </template>
    </div>
  </div>
</template>

<script>
/**
* @customElement
* @polymer
*/
class StuarttettdotcomApp extends Polymer.Element {
  static get is() { return 'stuarttettdotcom-app'; }
  static get properties() {
    return {
      cards: {
        type: Array,
        value() {
          return [
            {type: 'skew-card',
            description: 'Created a logo for an online community platform for “makers” in the D.I.Y. community.',
            title: 'BuildUp.tv',
            image:'/images/buildup_mockup.jpg',
            link: './buildup',
          },

          {type: 'skew-card',
          description: 'Created a warm and respectful logo for an institute for couples therapy.',
          title: 'Jewish EFT Institute',
          image:'',
          link: ''},

          {type: 'skew-card',
          description: 'Designed a label for a craft beer aimed at customers who typically prefer easy-drinking beers',
          title: 'Big Sissy Lager',
          image:'/',
          link: ''},

          {type: 'skew-card',
          description: '',
          title: '',
          image:'',
          link: ''},
        ];}
      }
    }
  }

  ready() {
    super.ready();
    this.addEventListener('dom-change', () => {
      let wrapper = this.shadowRoot.querySelectorAll("skew-card");
      Array.from(wrapper).forEach( child => {
        child.addEventListener('dom-update', (event) => {
          console.log("updated " + child);
          console.log("event " + event.detail.removed);
        });
      });
    });
  }

  connectedCallback() {
    super.connectedCallback();
    // this._observer = new Polymer.FlattenedNodesObserver(this, (info) => {
    //   this.info = info;
    //   console.log("info: " + info);
    // });
    // this._observer = Polymer.DomApi.observeNodes((element, info) => {
    //   console.log("info: " + info + " " + element);
    // });
  }

  disconnectedCallback() {
    super.disconnectedCallback();
    // this._observer.disconect();
  }

  _domUpdated(event) {
    console.log("updated!");
    console.log(event);
  }
}

window.customElements.define(StuarttettdotcomApp.is, StuarttettdotcomApp);
</script>
</dom-module>
